<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">        
        <title>Simple Example</title>

        <style type="text/css">
            * { margin:0; padding:0; border:none; font-family:Consolas, Monospace; font-size:15px;}
            html, body { width:100%; height:100%; }
            body { background-color:#222; padding: 10px; box-sizing: border-box; }
        </style>

        <script type="module">
            import {Shell} from '../src/Shell.mjs';

            window.document.addEventListener('DOMContentLoaded', (e) => {
                const console = new Shell(document.getElementById("console"), `>>`);
                console.writeLine(`◕_◕ A simple CLI example`);

                // Define a command
                const commandEcho = Object.create({});
                commandEcho.match = function(_input) {
                    if(_input.startsWith('echo ')) {
                        return true;
                    }

                    return false;
                };

                commandEcho.process = function(_inputData) { 
                    return [_inputData.substring(5)];
                };

                // Add the command to the console
                console.addCommand(commandEcho);
            });

            // dynamically generate styles, prefix with Shell.componentId class selector to scope to component
            const appendStyleBlock = function() {
                const wrapper = document.createElement('div');
                wrapper.innerHTML = `
                    <style type="text/css">
                        .${Shell.componentId} p { color:#aaa; }
                    </style>
                `.trim();

                document.getElementsByTagName('head')[0].appendChild(wrapper.childNodes[0]);
            };

            // append the style block to the page
            appendStyleBlock();

        </script>

    </head>

    <body>
        <div id="console"></div>
    </body>

</html>

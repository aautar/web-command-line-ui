var WebCommandLineUI = (function (exports) {
    'use strict';

    var DOMHelper={createElementsFromHtml:function createElementsFromHtml(a){var b=document.createElement("div");return b.innerHTML=a.trim(),b.childNodes},appendHTML:function appendHTML(a,b){for(var c=DOMHelper.createElementsFromHtml(b),d=c[0];0<c.length;)a.appendChild(c[0]);return d},replaceHTML:function replaceHTML(a,b){a.innerHTML="",DOMHelper.appendHTML(a,b);},escapeHtml:function escapeHtml(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}};

    var componentId=`c-web-command-line-ui-shell-8aad94b3-d0ab-42f1-ba32-2970ef9b7df2`;function uuidv4(){return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=0|16*Math.random(),c="x"==a?b:8|3&b;return c.toString(16)})}function Shell(a,b){var c=this,d=`i-web-command-line-ui-shell-${uuidv4()}`,f=38,g=40,h=`<span class='promptcolor'>${DOMHelper.escapeHtml(b)}</span>&nbsp;`,i=[],j=[],k=0,l="",m=function renderComponentStyles(){var a=document.querySelector("style#c-8aad94b3-d0ab-42f1-ba32-2970ef9b7df2");null!==a&&document.removeChild(a);var b=`
            .${componentId}-output { cursor:default; padding:5px 5px 0px 0px; }
            .${componentId} .hide { display:none; }
            .${componentId} .line { padding:2px 0; margin:0; }
            .${componentId} input { background-color:transparent; color:#087AA7; margin:0; border:0 none; width:100%; outline:none; }
            .${componentId} .inputtable { margin-bottom: 15px; }
            .${componentId} .promptcolor { color:#878787; }
            .${componentId} .prev-input { color:#087AA7; }
            .${componentId} .output-block { color:#000; }
            .${componentId} .output-block-expandable { }
            .${componentId} .output-block-expandable:hover { background-color:#353535; }
            .${componentId} .block-expanded-content { border-left:2px solid #6c6c6c; padding:0px 6px 0 6px; margin:4px 0 0 0; }

            /* overrides / additions to default styles */
            ${x}

        `.trim();DOMHelper.appendHTML(document.head,`<style id="${componentId}" style="text/css">${b}</style>`);},n=function renderComponentElements(){var b=`
            <div class="${componentId} ${d}">
                <div class="${componentId}-output"></div>
                <div class="${componentId}-input line">
                    <form class="${componentId}-cmdline" onsubmit="return false;">
                        <table class="inputtable" border="0" cellspacing="0">
                            <tbody>
                                <tr>
                                    <td class="${componentId}-inputprompt">prompt:#&nbsp;</td>
                                    <td style="width:100%;"><input class="${componentId}-inputcmd" autocomplete="off" type="text" /></td>
                                </tr>
                            </tbody>
                        </table>
                
                    </form>
                </div>
                
                <div class="${componentId}-input-password" style="display:none;">
                    <form class="${componentId}-cmdline-password" onsubmit="return false;">
                        <table class="inputtable" border="0" cellspacing="0">
                            <tbody>
                                <tr>
                                    <td class="${componentId}-inputpassprompt">password:#&nbsp;</td>
                                    <td style="width:100%;"><input class="${componentId}-inputpass" autocomplete="off" type="password" /></td>
                                </tr>
                            </tbody>
                        </table>
                
                    </form>
                </div>
            </div>`;return DOMHelper.appendHTML(a,b)},o=n(),p=o.querySelector(`.${componentId}-input`),q=p.querySelector(`.${componentId}-cmdline`),r=p.querySelector(`.${componentId}-inputprompt`),s=p.querySelector(`.${componentId}-inputcmd`),t=o.querySelector(`.${componentId}-output`),u="output-block",v=50,w=!1,x="",y=function putFocusOnInput(){s.focus();},z=function fetchInputLine(){return s.value},A=function overwriteInputLine(a){s.value=a;},B=function clearInputLine(){s.value="";},C=function hidePrompt(){p.style.display="none";},D=function showPrompt(){p.style.display="block";},E=function processCommandInput(){var a=z();if(!(0>=a.length)){j.push(a),k=0,l="",DOMHelper.appendHTML(t,`<p class="prev-input line">${h}${a}</p>`),B(),C();var b=!1;i.forEach(function(d){if(!d.match(a))return !1;var e=d.process(a);e.forEach(function(a){c.writeLine(a);}),b=!0;}),b||c.writeLine(`¯\_(ツ)_/¯ Unrecognized input`),D(),window.scrollTo(0,document.body.scrollHeight),y();}},F=function bindKeys(){s.addEventListener("keyup",function(a){a.keyCode==f?(k++,k>j.length&&(k=j.length),A(j[j.length-k]),a.preventDefault()):a.keyCode==g?(k--,0>=k?(k=0,A(l)):A(j[j.length-k]),a.preventDefault()):l=z();}),q.addEventListener("submit",function(){E();}),window.addEventListener("click",function(a){var b=a.target.closest(`.${u}`);b||0>=window.getSelection().toString().length&&y();}),DOMHelper.replaceHTML(r,h),y();},G=function bindScrollHandler(){document.addEventListener("scroll",function(a){var b=t.offsetHeight-window.innerHeight;w=!!(window.scrollY<b);});},H=function scrollToLastOutput(){t.scrollIntoView({behavior:"instant",block:"end",inline:"nearest"});},I=function limitToMaxLines(){var a=t.querySelectorAll(`.${u}`).length;a>v&&t.querySelector(`.${u}:first-of-type`).remove();};this.getComponentId=function(){return componentId},this.writeLine=function(a){DOMHelper.appendHTML(t,`<div class="${u} line">${a}</div>`),I(),w||H();},this.writeBlock=function(a,b,c){var d=`
            <div class="${u} output-block-expandable line">
                <div>${b}</div>
                <div class="block-expanded-content hide">test</div>
            </div>
        `,e=DOMHelper.appendHTML(t,d);e.addEventListener("click",function(b){b.preventDefault();var d=b.target.closest(`.${u}`),e=d.getElementsByClassName("block-expanded-content")[0];e.classList.contains("hide")?(e.innerHTML=c(a),e.classList.remove("hide")):(e.classList.add("hide"),e.innerHTML="");}),I(),w||H();},this.addCommand=function(a){i.push(a);},this.setMaxOutputBlocks=function(a){v=a;},this.setComponentStyleOverrides=function(a){x=a,m();},F(),G(),m();}Shell.componentId="c-web-command-line-ui-shell-8aad94b3-d0ab-42f1-ba32-2970ef9b7df2";

    exports.Shell = Shell;

    Object.defineProperty(exports, '__esModule', { value: true });

    return exports;

}({}));
//# sourceMappingURL=web-command-line-ui.iife.min.js.map
